<script setup lang="ts">
import { computed, ref } from 'vue'
import { useRouter } from 'vue-router'
// getCurrentPagesæ˜¯uni-appå…¨å±€APIï¼Œä¸éœ€è¦é¢å¤–å¯¼å…¥

const router = useRouter()

// å®šä¹‰é¡µé¢é…ç½®
definePage({
  style: {
    navigationBarTitleText: 'è°ƒè§£å‘˜è¯¦æƒ…',
    navigationBarBackgroundColor: '#ffffff',
    navigationBarTextStyle: 'black',
  },
})

// è°ƒè§£å‘˜æ•°æ®
interface Mediator {
  id: string
  name: string
  avatar: string
  title: string
  organization: string
  expertise: string[]
  rating: number
  cases: number
  successRate: number
  experience: string
  education: string
  description: string
  certificates: string[]
}

// æ¨¡æ‹Ÿè°ƒè§£å‘˜æ•°æ®ï¼ˆä¸åˆ—è¡¨é¡µä¿æŒä¸€è‡´ï¼‰
const mediators = ref<Mediator[]>([
  {
    id: '1',
    name: 'ææ˜',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=liming',
    title: 'é«˜çº§è°ƒè§£å‘˜',
    organization: 'åŒ—äº¬å¸‚æµ·æ·€åŒºè°ƒè§£ä¸­å¿ƒ',
    expertise: ['åˆåŒçº çº·', 'æˆ¿äº§çº çº·'],
    rating: 4.9,
    cases: 328,
    successRate: 96.8,
    experience: 'æ‹¥æœ‰15å¹´æ³•å¾‹å®åŠ¡ç»éªŒï¼Œä¸“æ³¨äºåˆåŒçº çº·å’Œæˆ¿äº§çº çº·é¢†åŸŸçš„è°ƒè§£å·¥ä½œã€‚æ›¾æˆåŠŸè°ƒè§£å¤šèµ·é‡å¤§å•†ä¸šåˆåŒçº çº·ï¼Œè·å¾—å½“äº‹äººçš„é«˜åº¦è¯„ä»·ã€‚',
    education: 'åŒ—äº¬å¤§å­¦æ³•å­¦ç¡•å£«',
    description: 'ææ˜è°ƒè§£å‘˜æ‹¥æœ‰ä¸°å¯Œçš„è°ƒè§£ç»éªŒå’Œæ·±åšçš„æ³•å¾‹åŠŸåº•ï¼Œæ“…é•¿é€šè¿‡ä¸“ä¸šçš„æ³•å¾‹çŸ¥è¯†å’Œçµæ´»çš„è°ƒè§£æŠ€å·§ï¼Œå¸®åŠ©å½“äº‹äººæ‰¾åˆ°åŒèµ¢çš„è§£å†³æ–¹æ¡ˆã€‚',
    certificates: ['é«˜çº§è°ƒè§£å‘˜èµ„æ ¼è¯ä¹¦', 'æ³•å¾‹èŒä¸šèµ„æ ¼è¯ä¹¦', 'å¿ƒç†å’¨è¯¢å¸ˆè¯ä¹¦'],
  },
  {
    id: '2',
    name: 'å¼ å',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=zhanghua',
    title: 'èµ„æ·±è°ƒè§£å‘˜',
    organization: 'ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºè°ƒè§£å§”å‘˜ä¼š',
    expertise: ['å©šå§»å®¶åº­', 'ç»§æ‰¿çº çº·'],
    rating: 4.8,
    cases: 286,
    successRate: 94.5,
    experience: 'ä»äº‹å©šå§»å®¶åº­è°ƒè§£å·¥ä½œ12å¹´ï¼Œæ“…é•¿å¤„ç†å„ç§å¤æ‚çš„å®¶åº­çº çº·ï¼ŒåŒ…æ‹¬ç¦»å©šè´¢äº§åˆ†å‰²ã€å­å¥³æŠšå…»ã€é—äº§ç»§æ‰¿ç­‰é—®é¢˜ã€‚',
    education: 'å¤æ—¦å¤§å­¦ç¤¾ä¼šå­¦ç¡•å£«',
    description: 'å¼ åè°ƒè§£å‘˜æ“…é•¿å€¾å¬å½“äº‹äººçš„éœ€æ±‚ï¼Œé€šè¿‡è€å¿ƒç»†è‡´çš„æ²Ÿé€šï¼Œå¸®åŠ©å½“äº‹äººåŒ–è§£çŸ›ç›¾ï¼Œç»´æŠ¤å®¶åº­å’Œè°ã€‚',
    certificates: ['å©šå§»å®¶åº­å’¨è¯¢å¸ˆ', 'è°ƒè§£å‘˜èµ„æ ¼è¯ä¹¦', 'å¿ƒç†å’¨è¯¢å¸ˆè¯ä¹¦'],
  },
  {
    id: '3',
    name: 'ç‹èŠ³',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=wangfang',
    title: 'ä¸“å®¶è°ƒè§£å‘˜',
    organization: 'å¹¿å·å¸‚å¤©æ²³åŒºäººæ°‘è°ƒè§£åä¼š',
    expertise: ['åŠ³åŠ¨äº‰è®®', 'ä¾µæƒè´£ä»»'],
    rating: 4.9,
    cases: 412,
    successRate: 97.2,
    experience: '20å¹´åŠ³åŠ¨æ³•å®åŠ¡ç»éªŒï¼Œæ›¾ä»»æŸå¤§å‹ä¼ä¸šäººåŠ›èµ„æºæ€»ç›‘ï¼Œç†Ÿæ‚‰ä¼ä¸šç”¨å·¥ç®¡ç†å’ŒåŠ³åŠ¨æ³•å¾‹æ³•è§„ï¼Œæ“…é•¿å¤„ç†å„ç±»åŠ³åŠ¨äº‰è®®æ¡ˆä»¶ã€‚',
    education: 'ä¸­å›½æ”¿æ³•å¤§å­¦æ³•å­¦åšå£«',
    description: 'ç‹èŠ³è°ƒè§£å‘˜æ‹¥æœ‰æ‰å®çš„æ³•å¾‹ç†è®ºåŸºç¡€å’Œä¸°å¯Œçš„å®è·µç»éªŒï¼Œèƒ½å¤Ÿå‡†ç¡®æŠŠæ¡æ¡ˆä»¶å…³é”®ç‚¹ï¼Œæå‡ºåˆ‡å®å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚',
    certificates: ['ä¸“å®¶è°ƒè§£å‘˜èµ„æ ¼è¯ä¹¦', 'åŠ³åŠ¨æ³•ä¸“å®¶', 'ä¼ä¸šæ³•å¾‹é¡¾é—®'],
  },
  {
    id: '4',
    name: 'åˆ˜å¼º',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=liuqiang',
    title: 'é«˜çº§è°ƒè§£å‘˜',
    organization: 'æ·±åœ³å¸‚å—å±±åŒºå•†äº‹è°ƒè§£ä¸­å¿ƒ',
    expertise: ['å€ºåŠ¡çº çº·', 'åˆåŒçº çº·'],
    rating: 4.7,
    cases: 253,
    successRate: 93.7,
    experience: '10å¹´é‡‘èæ³•å¾‹æœåŠ¡ç»éªŒï¼Œä¸“æ³¨äºå€ºåŠ¡çº çº·å’Œå•†äº‹åˆåŒçº çº·çš„è°ƒè§£å·¥ä½œï¼Œæ›¾åœ¨å¤šå®¶é“¶è¡Œå’Œé‡‘èæœºæ„æ‹…ä»»æ³•å¾‹é¡¾é—®ã€‚',
    education: 'æ·±åœ³å¤§å­¦é‡‘èå­¦ç¡•å£«',
    description: 'åˆ˜å¼ºè°ƒè§£å‘˜ç†Ÿæ‚‰é‡‘èæ³•å¾‹æ³•è§„å’Œå•†ä¸šè¿ä½œæ¨¡å¼ï¼Œèƒ½å¤Ÿä»ä¸“ä¸šè§’åº¦ä¸ºå½“äº‹äººæä¾›åˆç†çš„è§£å†³æ–¹æ¡ˆã€‚',
    certificates: ['é‡‘èæ³•å¾‹é¡¾é—®', 'è°ƒè§£å‘˜èµ„æ ¼è¯ä¹¦', 'ä¼ä¸šé£é™©ç®¡ç†å¸ˆ'],
  },
  {
    id: '5',
    name: 'èµµæ•',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=zhaomin',
    title: 'èµ„æ·±è°ƒè§£å‘˜',
    organization: 'æ­å·å¸‚è¥¿æ¹–åŒºåŠ³åŠ¨äº‰è®®è°ƒè§£å§”å‘˜ä¼š',
    expertise: ['çŸ¥è¯†äº§æƒ', 'ä¾µæƒè´£ä»»'],
    rating: 4.8,
    cases: 198,
    successRate: 95.1,
    experience: '8å¹´çŸ¥è¯†äº§æƒæ³•å¾‹æœåŠ¡ç»éªŒï¼Œä¸“æ³¨äºå•†æ ‡ã€ä¸“åˆ©ã€è‘—ä½œæƒç­‰çŸ¥è¯†äº§æƒçº çº·çš„è°ƒè§£å·¥ä½œï¼Œæ›¾åœ¨æŸçŸ¥åå¾‹å¸ˆäº‹åŠ¡æ‰€æ‹…ä»»çŸ¥è¯†äº§æƒå¾‹å¸ˆã€‚',
    education: 'æµ™æ±Ÿå¤§å­¦æ³•å­¦ç¡•å£«',
    description: 'èµµæ•è°ƒè§£å‘˜å¯¹çŸ¥è¯†äº§æƒæ³•å¾‹æ³•è§„æœ‰æ·±å…¥ç ”ç©¶ï¼Œèƒ½å¤Ÿä¸ºå½“äº‹äººæä¾›ä¸“ä¸šçš„æ³•å¾‹å»ºè®®å’Œè°ƒè§£æ–¹æ¡ˆã€‚',
    certificates: ['çŸ¥è¯†äº§æƒå¸ˆ', 'è°ƒè§£å‘˜èµ„æ ¼è¯ä¹¦', 'ä¸“åˆ©ä»£ç†äºº'],
  },
])

const mediator = ref<Mediator>({
  id: 'default',
  name: 'è°ƒè§£å‘˜',
  avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=default',
  title: 'è°ƒè§£å‘˜',
  organization: 'è°ƒè§£ä¸­å¿ƒ',
  expertise: ['ä¸“ä¸šè°ƒè§£'],
  rating: 4.5,
  cases: 100,
  successRate: 90,
  experience: 'æ‹¥æœ‰ä¸°å¯Œçš„è°ƒè§£ç»éªŒï¼Œä¸“æ³¨äºå„ç±»çº çº·çš„è§£å†³å·¥ä½œã€‚',
  education: 'ç›¸å…³ä¸“ä¸šèƒŒæ™¯',
  description: 'ä¸“ä¸šè°ƒè§£å‘˜ï¼Œè‡´åŠ›äºä¸ºå½“äº‹äººæä¾›ä¼˜è´¨çš„è°ƒè§£æœåŠ¡ã€‚',
  certificates: ['è°ƒè§£å‘˜èµ„æ ¼è¯ä¹¦'],
})

// é¡µé¢åŠ è½½æ—¶è·å–è°ƒè§£å‘˜æ•°æ®
onLoad((options) => {
  console.log('======= onLoad é¡µé¢åŠ è½½ =======')
  console.log('æ¥æ”¶åˆ°çš„å®Œæ•´optionså¯¹è±¡:', JSON.stringify(options))

  // è·å–å¹¶å¤„ç†IDå‚æ•°
  const rawId = options?.id
  console.log('åŸå§‹IDå€¼:', rawId, 'åŸå§‹ç±»å‹:', typeof rawId)

  // è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶å¤„ç†undefined/nullæƒ…å†µ
  const mediatorId = rawId !== undefined && rawId !== null ? String(rawId) : '1'
  console.log('æœ€ç»ˆä½¿ç”¨çš„è°ƒè§£å‘˜ID:', mediatorId, 'æœ€ç»ˆç±»å‹:', typeof mediatorId)

  // ç«‹å³åŠ è½½æ•°æ®
  loadMediatorData(mediatorId)
  console.log('======= onLoad ç»“æŸ =======')
})

// è®¡ç®—æˆåŠŸæ¡ˆä¾‹æ•°é‡
const successCases = computed(() => {
  return Math.floor(mediator.value.cases * mediator.value.successRate / 100)
})

// ç”Ÿæˆæ˜Ÿçº§è¯„åˆ†
const renderStars = computed(() => {
  const stars = []
  const fullStars = Math.floor(mediator.value.rating)
  const hasHalfStar = mediator.value.rating % 1 >= 0.5

  for (let i = 0; i < fullStars; i++) {
    stars.push('â˜…')
  }

  if (hasHalfStar) {
    stars.push('â˜…')
  }

  const emptyStars = 5 - stars.length
  for (let i = 0; i < emptyStars; i++) {
    stars.push('â˜†')
  }

  return stars.join('')
})

// åŠ è½½è°ƒè§£å‘˜æ•°æ®
function loadMediatorData(id: string) {
  console.log('======= loadMediatorData å¼€å§‹ =======')
  console.log('æ¥æ”¶çš„ID:', id, 'ç±»å‹:', typeof id)

  // é˜²å¾¡æ€§ç¼–ç¨‹ï¼šç¡®ä¿mediatorsæ•°ç»„æœ‰æ•ˆ
  if (!mediators.value || !Array.isArray(mediators.value)) {
    console.error('é”™è¯¯: mediatorsæ•°ç»„æ— æ•ˆ:', mediators.value)
    return
  }

  console.log('å¯ç”¨çš„è°ƒè§£å‘˜æ•°æ®æ€»æ•°:', mediators.value.length)
  console.log('æ‰€æœ‰è°ƒè§£å‘˜IDåˆ—è¡¨:', mediators.value.map(m => m.id).join(', '))

  // é‡ç½®mediatoræ•°æ®ä¸ºé»˜è®¤å€¼ï¼Œç¡®ä¿æ¯æ¬¡éƒ½æ˜¯å…¨æ–°å¼€å§‹
  mediator.value = {
    id: 'default',
    name: 'åŠ è½½ä¸­...',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=loading',
    title: 'åŠ è½½ä¸­...',
    organization: 'åŠ è½½ä¸­...',
    expertise: [],
    rating: 0,
    cases: 0,
    successRate: 0,
    experience: '',
    education: '',
    description: '',
    certificates: [],
  }

  // ä½¿ç”¨forå¾ªç¯è¿›è¡Œä¸¥æ ¼æ¯”è¾ƒï¼Œé¿å…ä»»ä½•å¯èƒ½çš„æ¯”è¾ƒé—®é¢˜
  let found = false
  for (let i = 0; i < mediators.value.length; i++) {
    const currentMediator = mediators.value[i]
    const currentId = String(currentMediator.id)
    console.log(`æ¯”è¾ƒ: å½“å‰è°ƒè§£å‘˜ID=${currentId}, ç›®æ ‡ID=${id}, ç›¸ç­‰? ${currentId === id}`)

    if (currentId === id) {
      // æ·±åº¦å¤åˆ¶ç¡®ä¿å®Œå…¨æ›¿æ¢å¯¹è±¡å¼•ç”¨
      mediator.value = JSON.parse(JSON.stringify(currentMediator))
      console.log('æ‰¾åˆ°åŒ¹é…çš„è°ƒè§£å‘˜:', currentMediator.name, 'ID:', currentMediator.id)
      found = true
      break
    }
  }

  if (!found) {
    console.warn(`è­¦å‘Š: æœªæ‰¾åˆ°IDä¸º${id}çš„è°ƒè§£å‘˜æ•°æ®`)
    // æ˜ç¡®è¾“å‡ºå½“å‰å­˜åœ¨çš„è°ƒè§£å‘˜åˆ—è¡¨ï¼Œä¾¿äºè°ƒè¯•
    console.log('å½“å‰å¯ç”¨è°ƒè§£å‘˜åˆ—è¡¨:', JSON.stringify(mediators.value.map(m => ({ id: m.id, name: m.name })), null, 2))

    // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®ï¼ˆææ˜ï¼‰
    mediator.value = {
      id: '1', // ä½¿ç”¨ææ˜ä½œä¸ºé»˜è®¤æ•°æ®
      name: 'ææ˜',
      avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=liming',
      title: 'é«˜çº§è°ƒè§£å‘˜',
      organization: 'åŒ—äº¬å¸‚æµ·æ·€åŒºè°ƒè§£ä¸­å¿ƒ',
      expertise: ['åˆåŒçº çº·', 'æˆ¿äº§çº çº·'],
      rating: 4.9,
      cases: 328,
      successRate: 96.8,
      experience: 'æ‹¥æœ‰15å¹´æ³•å¾‹å®åŠ¡ç»éªŒï¼Œä¸“æ³¨äºåˆåŒçº çº·å’Œæˆ¿äº§çº çº·é¢†åŸŸçš„è°ƒè§£å·¥ä½œã€‚æ›¾æˆåŠŸè°ƒè§£å¤šèµ·é‡å¤§å•†ä¸šåˆåŒçº çº·ï¼Œè·å¾—å½“äº‹äººçš„é«˜åº¦è¯„ä»·ã€‚',
      education: 'åŒ—äº¬å¤§å­¦æ³•å­¦ç¡•å£«',
      description: 'ææ˜è°ƒè§£å‘˜æ‹¥æœ‰ä¸°å¯Œçš„è°ƒè§£ç»éªŒå’Œæ·±åšçš„æ³•å¾‹åŠŸåº•ï¼Œæ“…é•¿é€šè¿‡ä¸“ä¸šçš„æ³•å¾‹çŸ¥è¯†å’Œçµæ´»çš„è°ƒè§£æŠ€å·§ï¼Œå¸®åŠ©å½“äº‹äººæ‰¾åˆ°åŒèµ¢çš„è§£å†³æ–¹æ¡ˆã€‚',
      certificates: ['é«˜çº§è°ƒè§£å‘˜èµ„æ ¼è¯ä¹¦', 'æ³•å¾‹èŒä¸šèµ„æ ¼è¯ä¹¦', 'å¿ƒç†å’¨è¯¢å¸ˆè¯ä¹¦'],
    }
  }

  console.log('æœ€ç»ˆæ˜¾ç¤ºçš„è°ƒè§£å‘˜æ•°æ®:', mediator.value.name, 'ID:', mediator.value.id)
  console.log('======= loadMediatorData ç»“æŸ =======')
}

// è¿”å›ä¸Šä¸€é¡µ
function navigateBack() {
  router.back()
}

// é¢„çº¦è°ƒè§£
function handleBookMediation() {
  // ä½¿ç”¨uni.navigateToè·³è½¬åˆ°è°ƒè§£ç”³è¯·è¡¨å•é¡µé¢
  uni.navigateTo({
    url: `/pages-sub/1-dispute-mediation/mediation-request?mediatorId=${mediator.value.id}&mediatorName=${encodeURIComponent(mediator.value.name)}`,
    success: () => {
      console.log('æˆåŠŸè·³è½¬åˆ°è°ƒè§£ç”³è¯·è¡¨å•é¡µé¢')
    },
    fail: (error) => {
      console.error('è·³è½¬å¤±è´¥:', error)
      uni.showToast({
        title: 'è·³è½¬å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•',
        icon: 'none',
      })
    },
  })
}
</script>

<template>
  <view class="mediator-detail-container">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <view class="header">
      <view class="header-left" @click="navigateBack">
        <text class="back-icon">â†</text>
      </view>
      <view class="header-title">
        è°ƒè§£å‘˜è¯¦æƒ…
      </view>
      <view class="header-right">
        <text class="more-icon">...</text>
      </view>
    </view>

    <!-- è°ƒè§£å‘˜åŸºæœ¬ä¿¡æ¯å¡ç‰‡ -->
    <view class="mediator-basic-info">
      <image :src="mediator.avatar" alt="{{ mediator.name }}" class="mediator-avatar" />
      <view class="mediator-info">
        <view class="mediator-name-title">
          <text class="mediator-name">{{ mediator.name }}</text>
          <text class="mediator-title">{{ mediator.title }}</text>
        </view>
        <text class="mediator-organization">{{ mediator.organization }}</text>
        <view class="rating-container">
          <text class="rating-score">{{ mediator.rating }}</text>
          <text class="stars">{{ renderStars }}</text>
        </view>
      </view>
      <view class="bookmarked-badge">
        <text class="bookmarked-text">å·²å®å</text>
      </view>
    </view>

    <!-- è°ƒè§£å‘˜ç»Ÿè®¡ä¿¡æ¯ -->
    <view class="mediator-stats">
      <view class="stat-item">
        <text class="stat-value">{{ mediator.cases }}</text>
        <text class="stat-label">è°ƒè§£æ¡ˆä»¶</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{ mediator.successRate }}%</text>
        <text class="stat-label">æˆåŠŸç‡</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{ successCases }}</text>
        <text class="stat-label">æˆåŠŸæ¡ˆä¾‹</text>
      </view>
    </view>

    <!-- æ“…é•¿é¢†åŸŸ -->
    <view class="section">
      <view class="section-title">
        æ“…é•¿é¢†åŸŸ
      </view>
      <view class="expertise-tags">
        <view v-for="field in mediator.expertise" :key="field" class="expertise-tag">
          {{ field }}
        </view>
      </view>
    </view>

    <!-- ä¸ªäººç®€ä»‹ -->
    <view class="section">
      <view class="section-title">
        ä¸ªäººç®€ä»‹
      </view>
      <view class="profile-content">
        <text class="profile-text">{{ mediator.description }}</text>
      </view>
    </view>

    <!-- æ•™è‚²èƒŒæ™¯ -->
    <view class="section">
      <view class="section-title">
        æ•™è‚²èƒŒæ™¯
      </view>
      <view class="education-content">
        <text class="education-text">{{ mediator.education }}</text>
      </view>
    </view>

    <!-- ä¸“ä¸šèµ„è´¨ -->
    <view v-if="mediator.certificates && mediator.certificates.length > 0" class="section">
      <view class="section-title">
        ä¸“ä¸šèµ„è´¨
      </view>
      <view class="certificates-list">
        <view v-for="(cert, index) in mediator.certificates" :key="index" class="certificate-item">
          <view class="certificate-icon">
            <text class="icon-text">ğŸ“„</text>
          </view>
          <text class="certificate-text">{{ cert }}</text>
        </view>
      </view>
    </view>

    <!-- è°ƒè§£ç»éªŒ -->
    <view class="section">
      <view class="section-title">
        è°ƒè§£ç»éªŒ
      </view>
      <view class="experience-content">
        <text class="experience-text">{{ mediator.experience }}</text>
      </view>
    </view>

    <!-- åº•éƒ¨æ“ä½œæŒ‰é’® -->
    <view class="bottom-actions">
      <button class="book-button" @click="handleBookMediation">
        å»è°ƒè§£
      </button>
    </view>
  </view>
</template>

<style scoped lang="scss">
// å…¨å±€å˜é‡
$primary-color: #1e90ff;
$success-color: #07c160;
$warning-color: #ff6b35;
$text-primary: #333333;
$text-secondary: #666666;
$text-tertiary: #999999;
$background-color: #f8f8f8;
$card-background: #ffffff;
$border-color: #f0f0f0;
$shadow: 0 2px 10px rgba(0, 0, 0, 0.05);

.mediator-detail-container {
  min-height: 100vh;
  background-color: $background-color;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
}

/* é¡¶éƒ¨å¯¼èˆªæ  */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 44px;
  padding: 0 16px;
  background-color: $card-background;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: $shadow;
}

.header-left,
.header-right {
  width: 40px;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.back-icon,
.more-icon {
  font-size: 18px;
  color: $text-primary;
}

.header-title {
  font-size: 16px;
  font-weight: 600;
  color: $text-primary;
}

/* è°ƒè§£å‘˜åŸºæœ¬ä¿¡æ¯å¡ç‰‡ */
.mediator-basic-info {
  display: flex;
  align-items: center;
  padding: 20px 16px;
  background-color: $card-background;
  margin-bottom: 12px;
  border-radius: 12px;
  margin: 12px;
  box-shadow: $shadow;
  position: relative;
}

.mediator-avatar {
  width: 88px;
  height: 88px;
  border-radius: 50%;
  margin-right: 16px;
  border: 3px solid $primary-color;
  box-shadow: 0 4px 12px rgba(30, 144, 255, 0.2);
}

.mediator-info {
  flex: 1;
}

.mediator-name-title {
  display: flex;
  align-items: center;
  margin-bottom: 8px;
}

.mediator-name {
  font-size: 20px;
  font-weight: 700;
  color: $text-primary;
  margin-right: 8px;
}

.mediator-title {
  font-size: 12px;
  color: $primary-color;
  background-color: rgba(30, 144, 255, 0.1);
  padding: 4px 10px;
  border-radius: 12px;
  border: 1px solid rgba(30, 144, 255, 0.3);
}

.mediator-organization {
  font-size: 14px;
  color: $text-secondary;
  margin-bottom: 8px;
  display: block;
}

.rating-container {
  display: flex;
  align-items: center;
}

.rating-score {
  font-size: 16px;
  font-weight: 600;
  color: $warning-color;
  margin-right: 6px;
}

.stars {
  font-size: 12px;
  color: $warning-color;
  letter-spacing: 1px;
}

.bookmarked-badge {
  position: absolute;
  top: 20px;
  right: 20px;
  background-color: #fff2e8;
  color: $warning-color;
  font-size: 12px;
  padding: 4px 10px;
  border-radius: 12px;
  border: 1px solid #ffe4cc;
}

/* è°ƒè§£å‘˜ç»Ÿè®¡ä¿¡æ¯ */
.mediator-stats {
  display: flex;
  background-color: $card-background;
  margin: 0 12px 12px 12px;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: $shadow;
}

.stat-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 16px 0;
  border-right: 1px solid $border-color;
  transition: all 0.3s ease;
}

.stat-item:last-child {
  border-right: none;
}

.stat-item:active {
  background-color: rgba(30, 144, 255, 0.05);
}

.stat-value {
  font-size: 18px;
  font-weight: 700;
  color: $text-primary;
  margin-bottom: 4px;
}

.stat-label {
  font-size: 13px;
  color: $text-tertiary;
}

/* é€šç”¨åŒºå—æ ·å¼ */
.section {
  background-color: $card-background;
  margin: 0 12px 12px 12px;
  padding: 16px;
  border-radius: 12px;
  box-shadow: $shadow;
}

.section-title {
  font-size: 16px;
  font-weight: 600;
  color: $text-primary;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid $border-color;
}

/* æ“…é•¿é¢†åŸŸ */
.expertise-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.expertise-tag {
  padding: 6px 14px;
  background-color: rgba(30, 144, 255, 0.1);
  color: $primary-color;
  font-size: 13px;
  border-radius: 18px;
  border: 1px solid rgba(30, 144, 255, 0.3);
  transition: all 0.3s ease;
}

.expertise-tag:active {
  background-color: rgba(30, 144, 255, 0.2);
}

/* ä¸ªäººç®€ä»‹ã€æ•™è‚²èƒŒæ™¯ã€è°ƒè§£ç»éªŒ */
.profile-content,
.education-content,
.experience-content {
  font-size: 14px;
  color: $text-secondary;
  line-height: 1.8;
}

/* ä¸“ä¸šèµ„è´¨ */
.certificates-list {
  padding-left: 0;
}

.certificate-item {
  display: flex;
  align-items: flex-start;
  margin-bottom: 12px;
  padding: 8px 12px;
  background-color: rgba(30, 144, 255, 0.05);
  border-radius: 8px;
  border: 1px solid rgba(30, 144, 255, 0.2);
}

.certificate-icon {
  margin-right: 8px;
  margin-top: 2px;
}

.icon-text {
  font-size: 14px;
}

.certificate-text {
  font-size: 14px;
  color: $text-secondary;
  line-height: 1.6;
  flex: 1;
}

/* åº•éƒ¨æ“ä½œæŒ‰é’® */
.bottom-actions {
  position: sticky;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: $card-background;
  padding: 16px 12px;
  box-shadow: 0 -2px 12px rgba(0, 0, 0, 0.06);
}

.book-button {
  width: 100%;
  height: 48px;
  background-color: $primary-color;
  color: #ffffff;
  font-size: 16px;
  font-weight: 600;
  border-radius: 24px;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px rgba(30, 144, 255, 0.3);
  transition: all 0.3s ease;
}

.book-button:active {
  background-color: #1873cc;
  box-shadow: 0 2px 8px rgba(30, 144, 255, 0.4);
  transform: translateY(1px);
}
</style>
